<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–®–∫–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã</title>

<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>

<style>
body {
    font-family: Arial;
    padding: 20px;
    max-width: 600px;
    margin: 0 auto;
}

select, button {
    margin-top: 10px;
    padding: 10px;
    font-size: 16px;
    width: 100%;
    box-sizing: border-box;
}

button {
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
}

button:hover {
    background-color: #45a049;
}

label {
    font-weight: bold;
    display: block;
    margin-top: 15px;
}
</style>
</head>

<body>

<h2>üéÆ –í—ã–±–æ—Ä –∏–≥—Ä—ã</h2>

<label>–í—ã–±–µ—Ä–∏—Ç–µ —à–∫–æ–ª—É:</label><br>
<select id="school" size="10" style="height: auto;">
    <option value="1">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ1"</option>
    <option value="2">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ2"</option>
    <option value="3">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ3"</option>
    <option value="4">–ú–ë–û–£ "–ì–∏–º–Ω–∞–∑–∏—è ‚Ññ4"</option>
    <option value="5">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ5"</option>
    <option value="6">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ6"</option>
    <option value="7">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ7"</option>
    <option value="8">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ8 —Å —É–≥–ª—É–±–ª–µ–Ω–Ω—ã–º –∏–∑—É—á–µ–Ω–∏–µ–º –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤"</option>
    <option value="9">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ9 –∏–º. –Æ.–ê. –ì–∞–≥–∞—Ä–∏–Ω–∞"</option>
    <option value="10">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ10"</option>
    <option value="11">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ12"</option>
    <option value="12">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ13 –∏–º. –≠.–î. –ë–∞–ª—Ç–∏–Ω–∞"</option>
    <option value="13">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ14"</option>
    <option value="14">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ15"</option>
    <option value="15">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ16"</option>
    <option value="16">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ17 –∏–º. –ì–µ—Ä–æ—è –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –ê.–ë. –ë—É—Ö–∞–Ω–æ–≤–∞"</option>
    <option value="17">–ú–ë–û–£ "–¶–µ–Ω—Ç—Ä –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ‚Ññ2 "–ì–Ω–µ–∑–¥–æ–≤–æ"</option>
    <option value="18">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ19 –∏–º. –ì–µ—Ä–æ—è –†–æ—Å—Å–∏–∏ –ü–∞–Ω–æ–≤–∞"</option>
    <option value="19">–ú–ë–û–£ "–õ–∏—Ü–µ–π ‚Ññ1 –∏–º. –∞–∫–∞–¥–µ–º–∏–∫–∞ –ë.–ù. –ü–µ—Ç—Ä–æ–≤–∞"</option>
    <option value="20">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ21 –∏–º. –ù.–ò. –†—ã–ª–µ–Ω–∫–æ–≤–∞"</option>
    <option value="21">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ22"</option>
    <option value="22">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ23"</option>
    <option value="23">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ24"</option>
    <option value="24">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ25"</option>
    <option value="25">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ26 –∏–º. –ê.–°. –ü—É—à–∫–∏–Ω–∞"</option>
    <option value="26">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ27 –∏–º. –≠.–ê. –•–∏–ª—è"</option>
    <option value="27">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ28"</option>
    <option value="28">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ29 —Å —É–≥–ª—É–±–ª–µ–Ω–Ω—ã–º –∏–∑—É—á–µ–Ω–∏–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤"</option>
    <option value="29">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ30 –∏–º. –°.–ê. –ñ–µ–ª–µ–∑–Ω–æ–≤–∞"</option>
    <option value="30">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ31"</option>
    <option value="31">–ú–ë–û–£ "–¶–µ–Ω—Ç—Ä –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ‚Ññ3 "–ó–≤–µ–∑–¥–Ω—ã–π"</option>
    <option value="32">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ33"</option>
    <option value="33">–ú–ë–û–£ "–¶–µ–Ω—Ç—Ä –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ‚Ññ4 "–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞"</option>
    <option value="34">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ35"</option>
    <option value="35">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ37"</option>
    <option value="36">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ38"</option>
    <option value="37">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ39"</option>
    <option value="38">–ú–ë–û–£ "–¶–µ–Ω—Ç—Ä –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ‚Ññ1 "–ê–∫–∞–¥–µ–º–∏—è –¥–µ—Ç—Å—Ç–≤–∞"</option>
    <option value="39">–ú–ë–û–£ "–û—Ç–∫—Ä—ã—Ç–∞—è (—Å–º–µ–Ω–Ω–∞—è) —à–∫–æ–ª–∞ ‚Ññ1"</option>
    <option value="40">–ú–ë–û–£ "–û—Ç–∫—Ä—ã—Ç–∞—è (—Å–º–µ–Ω–Ω–∞—è) —à–∫–æ–ª–∞ ‚Ññ2"</option>
    <option value="41">–ú–ë–û–£ "–ì–∏–º–Ω–∞–∑–∏—è ‚Ññ1 –∏–º. –ù.–ú. –ü—Ä–∂–µ–≤–∞–ª—å—Å–∫–æ–≥–æ"</option>
    <option value="42">–ú–ë–û–£ "–ú–Ω–æ–≥–æ–ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π –ª–∏—Ü–µ–π"</option>
</select>

<br><br>

<label>–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É:</label><br>
<select id="game">
    <option value="ks_2x2">–ö–° (2x2)</option>
    <option value="ks_5x5">–ö–° (5x5)</option>
    <option value="dota">–î–æ—Ç–∞ 2</option>
    <option value="minecraft">–ú–∞–π–Ω–∫—Ä–∞—Ñ—Ç</option>
    <option value="roblox">–†–æ–±–ª–æ–∫—Å</option>
    <option value="valorant">–í–∞–ª–æ—Ä–∞–Ω—Ç</option>
</select>

<br><br>

<button onclick="sendData()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>

<script>

vkBridge.send('VKWebAppInit');

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–∫—Ä—ã—Ç–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –í–ö
if (window.location.href.includes('vk.com')) {
    console.log('–ó–∞–ø—É—â–µ–Ω–æ –≤–Ω—É—Ç—Ä–∏ –í–ö');
} else {
    console.log('–ó–∞–ø—É—â–µ–Ω–æ –≤–Ω–µ –í–ö, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å');
}

async function sendData() {

    let school = document.getElementById("school").value;
    let schoolText = document.getElementById("school").selectedOptions[0].text;
    let game = document.getElementById("game").value;
    let gameText = document.getElementById("game").selectedOptions[0].text;

    try {

        const user = await vkBridge.send('VKWebAppGetUserInfo');

        const phoneData = await vkBridge.send("VKWebAppGetPhoneNumber");

        const payload = {
            vk_id: user.id,
            name: user.first_name + " " + user.last_name,
            school_id: school,
            school_name: schoolText,
            game_id: game,
            game_name: gameText,
            phone: phoneData.phone_number,
            date: new Date().toISOString()
        };

        await fetch("https://vk-school-app-server.onrender.com/save", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(payload)
        });

        alert("–û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω! –°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ :)");

    } catch (error) {
        alert("–û—à–∏–±–∫–∞ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–∞–ª—Å—è –¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ");
        console.error(error);
    }

}

</script>

</body>
</html>
