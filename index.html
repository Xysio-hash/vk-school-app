<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∫–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã</title>
    
    <!-- VK Bridge -->
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    
    <!-- VKUI styles -->
    <link href="https://unpkg.com/@vkontakte/vkui@4.0.0/dist/vkui.css" rel="stylesheet"/>
    
    <!-- Google Fonts –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome –¥–ª—è –∏–∫–æ–Ω–æ–∫ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            backdrop-filter: blur(10px);
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 50%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            position: relative;
            font-weight: 700;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
            position: relative;
            font-weight: 300;
        }
        
        .header i {
            font-size: 3em;
            margin-bottom: 15px;
            position: relative;
        }
        
        .content {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-weight: 500;
            font-size: 1.1em;
        }
        
        .form-group label i {
            margin-right: 10px;
            color: #667eea;
        }
        
        /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è —à–∫–æ–ª */
        .compact-select {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: white;
            font-size: 1em;
            color: #333;
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            transition: all 0.3s ease;
            background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23667eea' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
        }

        .compact-select:hover {
            border-color: #667eea;
        }

        .compact-select:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(118, 75, 162, 0.1);
        }

        .compact-select option {
            padding: 12px;
            font-size: 1em;
        }
        
        select[multiple] {
            height: 200px;
            padding: 10px;
        }
        
        select[multiple] option {
            padding: 10px 15px;
            border-radius: 8px;
            margin: 2px 0;
        }
        
        select[multiple] option:hover {
            background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%);
        }
        
        select[multiple] option:checked {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-submit {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }
        
        .btn-submit:active {
            transform: translateY(0);
        }
        
        .btn-submit i {
            font-size: 1.2em;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            color: #666;
            font-size: 0.9em;
            border-top: 1px solid #e0e0e0;
        }
        
        .footer i {
            color: #ff6b6b;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 480px) {
            .container {
                border-radius: 20px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
            
            .compact-select {
                padding: 12px 15px;
                font-size: 0.95em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <i class="fas fa-gamepad"></i>
            <h1>–®–∫–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã</h1>
            <p>–í—ã–±–µ—Ä–∏ –∏–≥—Ä—É –∏ –Ω–∞–π–¥–∏ –∫–æ–º–∞–Ω–¥—É</p>
        </div>
        
        <div class="content">
            <div class="form-group">
                <label>
                    <i class="fas fa-school"></i>
                    –í—ã–±–µ—Ä–∏—Ç–µ —à–∫–æ–ª—É
                </label>
                <select id="school" class="compact-select">
                    <option value="" disabled selected>üè´ –í—ã–±–µ—Ä–∏—Ç–µ —à–∫–æ–ª—É</option>
                    <option value="1">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ1"</option>
                    <option value="2">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ2"</option>
                    <option value="3">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ3"</option>
                    <option value="4">–ú–ë–û–£ "–ì–∏–º–Ω–∞–∑–∏—è ‚Ññ4"</option>
                    <option value="5">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ5"</option>
                    <option value="6">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ6"</option>
                    <option value="7">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ7"</option>
                    <option value="8">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ8 —Å —É–≥–ª—É–±–ª–µ–Ω–Ω—ã–º –∏–∑—É—á–µ–Ω–∏–µ–º –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤"</option>
                    <option value="9">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ9 –∏–º. –Æ.–ê. –ì–∞–≥–∞—Ä–∏–Ω–∞"</option>
                    <option value="10">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ10"</option>
                    <option value="11">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ12"</option>
                    <option value="12">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ13 –∏–º. –≠.–î. –ë–∞–ª—Ç–∏–Ω–∞"</option>
                    <option value="13">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ14"</option>
                    <option value="14">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ15"</option>
                    <option value="15">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ16"</option>
                    <option value="16">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ17 –∏–º. –ì–µ—Ä–æ—è –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –ê.–ë. –ë—É—Ö–∞–Ω–æ–≤–∞"</option>
                    <option value="17">–ú–ë–û–£ "–¶–µ–Ω—Ç—Ä –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ‚Ññ2 "–ì–Ω–µ–∑–¥–æ–≤–æ"</option>
                    <option value="18">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ19 –∏–º. –ì–µ—Ä–æ—è –†–æ—Å—Å–∏–∏ –ü–∞–Ω–æ–≤–∞"</option>
                    <option value="19">–ú–ë–û–£ "–õ–∏—Ü–µ–π ‚Ññ1 –∏–º. –∞–∫–∞–¥–µ–º–∏–∫–∞ –ë.–ù. –ü–µ—Ç—Ä–æ–≤–∞"</option>
                    <option value="20">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ21 –∏–º. –ù.–ò. –†—ã–ª–µ–Ω–∫–æ–≤–∞"</option>
                    <option value="21">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ22"</option>
                    <option value="22">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ23"</option>
                    <option value="23">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ24"</option>
                    <option value="24">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ25"</option>
                    <option value="25">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ26 –∏–º. –ê.–°. –ü—É—à–∫–∏–Ω–∞"</option>
                    <option value="26">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ27 –∏–º. –≠.–ê. –•–∏–ª—è"</option>
                    <option value="27">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ28"</option>
                    <option value="28">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ29 —Å —É–≥–ª—É–±–ª–µ–Ω–Ω—ã–º –∏–∑—É—á–µ–Ω–∏–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤"</option>
                    <option value="29">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ30 –∏–º. –°.–ê. –ñ–µ–ª–µ–∑–Ω–æ–≤–∞"</option>
                    <option value="30">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ31"</option>
                    <option value="31">–ú–ë–û–£ "–¶–µ–Ω—Ç—Ä –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ‚Ññ3 "–ó–≤–µ–∑–¥–Ω—ã–π"</option>
                    <option value="32">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ33"</option>
                    <option value="33">–ú–ë–û–£ "–¶–µ–Ω—Ç—Ä –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ‚Ññ4 "–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞"</option>
                    <option value="34">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ35"</option>
                    <option value="35">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ36"</option>
                    <option value="36">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ37"</option>
                    <option value="37">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ38"</option>
                    <option value="38">–ú–ë–û–£ "–°—Ä–µ–¥–Ω—è—è —à–∫–æ–ª–∞ ‚Ññ39"</option>
                    <option value="39">–ú–ë–û–£ "–¶–µ–Ω—Ç—Ä –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è ‚Ññ1 "–ê–∫–∞–¥–µ–º–∏—è –¥–µ—Ç—Å—Ç–≤–∞"</option>
                    <option value="40">–ú–ë–û–£ "–û—Ç–∫—Ä—ã—Ç–∞—è (—Å–º–µ–Ω–Ω–∞—è) —à–∫–æ–ª–∞ ‚Ññ1"</option>
                    <option value="41">–ú–ë–û–£ "–û—Ç–∫—Ä—ã—Ç–∞—è (—Å–º–µ–Ω–Ω–∞—è) —à–∫–æ–ª–∞ ‚Ññ2"</option>
                    <option value="42">–ú–ë–û–£ "–ì–∏–º–Ω–∞–∑–∏—è ‚Ññ1 –∏–º. –ù.–ú. –ü—Ä–∂–µ–≤–∞–ª—å—Å–∫–æ–≥–æ"</option>
                    <option value="43">–ú–ë–û–£ "–ú–Ω–æ–≥–æ–ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π –ª–∏—Ü–µ–π"</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>
                    <i class="fas fa-gamepad"></i>
                    –í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É
                </label>
                <select id="game" class="compact-select">
                    <option value="" disabled selected>üéÆ –í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É</option>
                    <option value="ks_2x2">üéÆ –ö–° (2x2)</option>
                    <option value="ks_5x5">üéØ –ö–° (5x5)</option>
                    <option value="dota">‚öîÔ∏è –î–æ—Ç–∞ 2</option>
                    <option value="minecraft">‚õèÔ∏è –ú–∞–π–Ω–∫—Ä–∞—Ñ—Ç</option>
                    <option value="roblox">üé≤ –†–æ–±–ª–æ–∫—Å</option>
                    <option value="valorant">üî´ –í–∞–ª–æ—Ä–∞–Ω—Ç</option>
                </select>
            </div>
            
            <button class="btn-submit" onclick="sendData()">
                <i class="fas fa-paper-plane"></i>
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å
            </button>
        </div>
        
        <div class="footer">
            <i class="fas fa-heart"></i> –°–¥–µ–ª–∞–Ω–æ –¥–ª—è —à–∫–æ–ª—å–Ω–∏–∫–æ–≤
        </div>
    </div>

    <script>
        vkBridge.send('VKWebAppInit');

        async function sendData() {
            const schoolSelect = document.getElementById("school");
            const gameSelect = document.getElementById("game");
            
            const school = schoolSelect.value;
            const schoolText = schoolSelect.selectedOptions[0].text;
            const game = gameSelect.value;
            const gameText = gameSelect.selectedOptions[0].text;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—ã–±—Ä–∞–Ω—ã —à–∫–æ–ª–∞ –∏ –∏–≥—Ä–∞
            if (!school || !game) {
                alert("‚ùå –í—ã–±–µ—Ä–∏—Ç–µ —à–∫–æ–ª—É –∏ –∏–≥—Ä—É!");
                return;
            }
            
            const button = document.querySelector('.btn-submit');
            const originalText = button.innerHTML;
            
            try {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                button.innerHTML = '<span class="loading"></span> –û—Ç–ø—Ä–∞–≤–∫–∞...';
                button.disabled = true;
                
                const user = await vkBridge.send('VKWebAppGetUserInfo');
                
                // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—Ç–∫–∞–∑–∞
                let phoneData;
                try {
                    phoneData = await vkBridge.send("VKWebAppGetPhoneNumber");
                } catch (phoneError) {
                    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–∞–ª—Å—è –¥–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω
                    alert("üì± –î–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º");
                    button.innerHTML = originalText;
                    button.disabled = false;
                    return;
                }
                
                const payload = {
                    vk_id: user.id,
                    name: `${user.first_name} ${user.last_name}`,
                    school_id: school,
                    school_name: schoolText,
                    game_id: game,
                    game_name: gameText,
                    phone: phoneData.phone_number,
                    date: new Date().toISOString()
                };
                
                const response = await fetch("https://vk-school-app-server.onrender.com/save", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();
                
                if (result.google) {
                    alert("‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–≤–æ–π –≤—ã–±–æ—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ Google —Ç–∞–±–ª–∏—Ü—É. –£–¥–∞—á–∏ –≤ –∏–≥—Ä–µ!");
                } else {
                    alert("‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–≤–æ–π –≤—ã–±–æ—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω. –£–¥–∞—á–∏ –≤ –∏–≥—Ä–µ!");
                }
                
            } catch (error) {
                alert("‚ùå –û—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑");
                console.error(error);
            } finally {
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                button.innerHTML = originalText;
                button.disabled = false;
            }
        }
    </script>
</body>
</html>
